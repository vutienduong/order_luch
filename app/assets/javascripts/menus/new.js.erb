var NewMenuForm = (function () {

    Array.prototype.contains = function (v) {
        for (var i = 0; i < this.length; i++) {
            if (this[i] === v) return true;
        }
        return false;
    };

    Array.prototype.unique = function () {
        var arr = [];
        for (var i = 0; i < this.length; i++) {
            if (!arr.contains(this[i])) {
                arr.push(this[i]);
            }
        }
        return arr;
    };

    addBtn = $("#new-menu-push");
    addBtn.on("click", function () {
        console.log("fk")
    });

    addBtn.click(function () {
        console.log("fk 2")
    });


    push = function () {
        console.log("push");
        leftList = $("#new-menu-all-restaurants");
        rightList = $("#menu_restaurant_ids");

        maxWidth = 228;
        maxHeight = 70;
        rightList.attr("multiple", "multiple");

        all_chosen_values = [];

        rightList.find("option").each(function () {
            all_chosen_values.push($(this).val());
        });

        console.log(all_chosen_values.unique());
        all_chosen_values = all_chosen_values.unique();

        leftList.find("option").each(function () {
            if ($(this).is(':selected')) {
                if ($(this).val() == "") {
                    return;
                }

                if (!all_chosen_values.contains($(this).val())) {
                    rightList.append($('<option>', {
                        value: $(this).val(),
                        text: $(this).text()
                    }));
                    console.log($(this).text(), $(this).val(), "dfkjhds");
                }
            }
        });
    };

    pop = function () {
        console.log("pop");
        rightList = $("#menu_restaurant_ids");
        rightList.find("option").each(function () {
            if ($(this).is(':selected')) {
                $(this).remove();
            }
        })
    };

    setAllOptionSelected = function(){
        //$("#menu_restaurant_ids option").prop("selected", true);
        //$("#menu_restaurant_ids").val("12", "13");
    };

    return {push: push, pop: pop, setSelected: setAllOptionSelected}
})();