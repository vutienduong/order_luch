var NewMenuForm = function () {

  var leftList = $("#new_menu_all_restaurants");
  var rightList = $("#menu_restaurant_ids");

  var addBtn = $("#new-menu-push");
  var removeBtn = $("#new-menu-pop");

  addBtn.click(function () {
    rightList.attr("multiple", "multiple");
    all_chosen_values = [];

    rightList.find("option").each(function () {
      all_chosen_values.push($(this).val());
    });

    console.log(all_chosen_values.unique());
    all_chosen_values = all_chosen_values.unique();

    leftList.find("option").each(function () {
      if ($(this).is(':selected')) {
        if ($(this).val() == "") {
          return;
        }
        console.log($(this).val())

        if (!all_chosen_values.contains($(this).val())) {
          rightList.append($('<option>', {
            value: $(this).val(),
            text: $(this).text()
          }));
        }
      }
    });
  });

  removeBtn.click(function () {
    console.log("pop");
    rightList.find("option").each(function () {
      if ($(this).is(':selected')) {
        $(this).remove();
      }
    })
  });

  $("input[name=commit]").click(function () {
    $("#menu_restaurant_ids option").prop("selected", true);
    $("#menu_provider_ids option").prop("selected", true);
  });
};


var NewMenuProvidersForm = function () {
  var leftList = $("#new_menu_all_providers");
  var rightList = $("#menu_provider_ids");

  var addBtn = $("#new-menu-provider-push");
  var removeBtn = $("#new-menu-provider-pop");

  addBtn.click(function () {
    rightList.attr("multiple", "multiple");
    all_chosen_values = [];

    rightList.find("option").each(function () {
      all_chosen_values.push($(this).val());
    });

    console.log(all_chosen_values.unique());
    all_chosen_values = all_chosen_values.unique();

    leftList.find("option").each(function () {
      if ($(this).is(':selected')) {
        if ($(this).val() == "") {
          return;
        }

        if (!all_chosen_values.contains($(this).val())) {
          rightList.append($('<option>', {
            value: $(this).val(),
            text: $(this).text()
          }));
        }
      }
    });
  });

  removeBtn.click(function () {
    console.log("pop");
    rightList.find("option").each(function () {
      if ($(this).is(':selected')) {
        $(this).remove();
      }
    })
  });
};
